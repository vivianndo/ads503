---
title: "Diabetes Project"
author: "Bethany Wang"
date: "2023-03-07"
output: html_document
Reference: https://www.hindawi.com/journals/bmri/2014/781670/
---

### 1. Exploratory Dada Analysis

#### 1.1 Importing and Checking Data
```{r}
df <- read.csv(file = "diabetic_data.csv")
dim(df)
str(df)
```

#### 1.2 Classifying Features

* Subset numerical numerical features
```{r}

df_num <-subset(df, select = c(time_in_hospital, num_lab_procedures, num_procedures, num_medications, number_outpatient, number_emergency, number_inpatient, number_diagnoses))

df_cat <- subset(df, select = -c(time_in_hospital, num_lab_procedures, num_procedures, num_medications, number_outpatient, number_emergency, number_inpatient, number_diagnoses))
```


#### 1.3 Check for missing values

```{r}
sort(colSums(is.na(df)), decreasing=TRUE)
```

#### 1.4 Statistics of the Numerical Variables

```{r}
summary(df_num)
```

#### 1.5 Correlations of the Numerical Variables

* Find Correlations of numerical features
```{r}
library(corrplot)
correlations <- cor(df_num)

# Correlation plot
corrplot(correlations, order = "hclust")
```

#### 1.6 Distribution of the Numerical Variables

* Distribution of numerical features
```{r out.width="1000", out.height="600"}
library(Hmisc)
hist.data.frame(df_num)
```

```{r out.width="1000", out.height="600"}
pairs(dfXn)
```

#### 1.7 Distribution of Categorical Variables

```{r}
par(mfrow = c(3,3))

barplot(table(dfXc$age), main="Distribution of Age", 
        xlab="Age", ylab="Count", col="blue")

barplot(table(df$race), main="Distribution of Race", 
        xlab="Race", ylab="Count", col="orange")

barplot(table(df$gender), main="Distribution of Gender", 
        xlab="Gender", ylab="Count", col="lightblue")

barplot(table(df$admission_type_id), main="Distribution of admission_type_id", 
        xlab="admission_type_id", ylab="Count", col="blue")

barplot(table(df$change), main="Distribution of change", 
        xlab="Race", ylab="Count", col="orange")

barplot(table(df$admission_source_id), main="Distribution of admission_source_id", 
        xlab="admission_source_id", ylab="Count", col="lightblue")

barplot(table(df$A1Cresult), main="Distribution of A1Cresult", 
        xlab="A1Cresult", ylab="Count", col="green")

barplot(table(df$diabetesMed), main="Distribution of diabetesMed", 
        xlab="diabetesMed", ylab="Count", col="lightgreen")

barplot(table(df$readmitted), main="Distribution of readmitted", 
        xlab="readmitted", ylab="Count", col="purple")
```

### 2. Data Preprocessing

#### 2.1 Filtering out predictors with near zero variance
```{r}
# Use nearZeroVar function from caret library to filter out low variance features
low_freq_cols <- nearZeroVar(df)
df <- df[, -low_freq_cols]
dim(df)
colnames(df)
```

#### 2.2 Removing useless features

```{r}
df <- subset(df, select = -c(encounter_id, patient_nbr, payer_code))
dim(df)
str(df)
```

```{r}

```


### 3. Modeling
```{r}
10
```

### 4. Conclusion
```{r}
10
```

### Data types
```{r}
10
```